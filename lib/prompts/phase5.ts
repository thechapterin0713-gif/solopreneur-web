import type { SessionData } from "@/lib/types/session";

export function getPhase5Prompt(
  sessionData: SessionData,
  substeps: Record<string, boolean>,
  existingDocument: string | null
): string {
  return `## 현재 Phase: Phase 5 - 리드 & 트래픽

### 목적
코어 포, 드림 100, E5 콘텐츠 방법, 리드 마그넷을 사용하여 고객 획득 전략을 설계합니다.

### 참조 프레임워크

#### 드림 100 (Russell Brunson)
타겟 고객이 이미 모여있는 100개의 장소/사람/채널
- 5가지 카테고리: 플랫폼/커뮤니티, 유튜브 채널, 팟캐스트/뉴스레터, 블로그/카페, 인플루언서/전문가
- 카테고리별 최소 10개 → 총 50개 이상

#### 코어 포 ($100M Leads)
|  | 1:1 | 1:다수 |
|--|-----|--------|
| 웜 청중 | 웜 아웃리치 | 콘텐츠 포스팅 |
| 콜드 청중 | 콜드 아웃리치 | 유료 광고 |
시작 권장: 웜 아웃리치 → 콘텐츠 → 콜드/광고

#### 100의 법칙
- 웜/콜드 아웃리치: 하루 100명 연락
- 콘텐츠: 하루 100분 제작
- 유료 광고: 하루 $100 지출

#### E5 콘텐츠 방법
Educate(교육 30%), Entertain(엔터테인 15%), Engage(참여 20%), Experience(경험 20%), Encourage(격려 15%)

#### 리드 마그넷 3가지 유형
1. 문제 인식형: 진단, 체크리스트, 퀴즈
2. 샘플형: 무료 1:1, 미니 코스
3. 첫걸음형: 가이드, 템플릿, 워크시트

### 질문 리스트

#### 질문 1 — 자원 확인
"마케팅에 투입할 수 있는 자원을 확인하겠습니다. 하루 평균 가용 시간, 월 마케팅 예산, 현재 연락 가능한 지인/네트워크 규모를 말씀해 주세요."

#### 질문 2 — 드림 100 리스트
카테고리별로 나누어 질문:
"타겟 고객이 이미 모여있는 곳을 카테고리별로 알려주세요."
- 플랫폼/커뮤니티, 유튜브 채널, 팟캐스트, 블로그, 인플루언서

#### 질문 3 — 파고들기 전략
"드림 100에 어떻게 접근하시겠어요?"
- 무료: 커뮤니티 활동, 콜라보레이션, 게스트 출연
- 유료: 메타 광고, 유튜브 광고, 네이버 검색 광고, 인플루언서 마케팅
- 자원에 맞는 방법 권장

#### 질문 4 — 코어 포 선택
자원 기반으로 1-2개 추천:
- 예산 0원 → 웜 아웃리치 + 콘텐츠
- 예산 있음 → 콘텐츠 + 유료 광고
100의 법칙 일일 액션 계산

#### 질문 5 — 콘텐츠 플랫폼 & E5 플랜
"주력 콘텐츠 플랫폼을 정하고, E5 방법으로 4주 콘텐츠 플랜을 세우겠습니다."

#### 질문 6 — 리드 마그넷 설계
"잠재 고객이 이메일을 남기고 싶게 만들 무료 자료를 만들어 봅시다."
- 유형, 제목, 형식 결정

### 현재 수집된 데이터
${JSON.stringify({
  lead_strategy: sessionData.lead_strategy,
  resources: sessionData.resources,
  target_profile: { gathering_places: sessionData.target_profile.gathering_places },
}, null, 2)}

### 현재 서브스텝 상태
${JSON.stringify(substeps, null, 2)}

### 기존 산출물
${existingDocument || "없음"}

### 산출물 템플릿 (05_리드_트래픽.md)
\`\`\`markdown
# 리드 & 트래픽 전략

> 작성일: [날짜] | 상태: 초안 / 완료

## 1. 자원 현황
| 항목 | 내용 |
|------|------|
| 하루 가용 시간 | |
| 월 마케팅 예산 | |
| 웜 리스트 규모 | |

## 2. 드림 100 리스트

### 플랫폼/커뮤니티
| # | 이름 | URL | 규모 |
|---|------|-----|------|

### 유튜브 채널
| # | 채널명 | 구독자 |
|---|--------|--------|

### 팟캐스트/뉴스레터
### 블로그/카페
### 인플루언서/전문가

## 3. 파고들기 전략
### 무료 방법
### 유료 방법

## 4. 코어 포 선택
- 주력:
- 보조:
- 100의 법칙 일일 액션:

## 5. 4주 콘텐츠 플랜 (E5)
| 주차 | 테마 | 콘텐츠 |
|------|------|--------|

## 6. 리드 마그넷
- 유형:
- 제목:
- 형식:
- 설명:
\`\`\`

### Phase 완료 조건
6개 서브스텝 모두 true이면 phase_complete: true, next_phase: 6`;
}
