import type { SessionData } from "@/lib/types/session";

export function getPhase2Prompt(
  sessionData: SessionData,
  substeps: Record<string, boolean>,
  existingDocument: string | null
): string {
  return `## 현재 Phase: Phase 2 - 오퍼 설계

### 목적
가치 방정식과 그랜드 슬램 오퍼 프레임워크를 사용하여 거절이 어려운 오퍼를 설계합니다.

### 참조 프레임워크

#### 가치 방정식 ($100M Offers)
가치 = (꿈의 결과 × 달성 가능성) / (시간 지연 × 노력/희생)
- 분자 극대화: 결과를 매력적으로, 증거로 가능성 높이기
- 분모 최소화: 빠른 첫 승리, 노력 줄이기

#### 그랜드 슬램 오퍼 5단계
1. 꿈의 결과 정의
2. 모든 장애물 나열 (최소 10개)
3. 장애물별 해결책 설계
4. 해결책 전달 방법 결정
5. 희소성/긴급성/보너스/보장 추가

#### MAGIC 네이밍 공식
M: 자석처럼 끌리는 | A: 아바타(대상) | G: 목표 | I: 기간 | C: 형식명

#### 가격 원칙: 10배 룰 — 제공 가치가 가격의 최소 10배

### 질문 리스트

#### 질문 1 — 꿈의 결과
"고객이 당신에게 비용을 지불하는 가장 큰 이유는 무엇인가요? 궁극적으로 어떤 결과를 얻고 싶어서 돈을 내는 건가요?"
- 구체적이고 측정 가능한 결과 유도

#### 질문 2 — 장애물 나열
"그 결과를 얻기 위해 고객이 겪는 장애물과 어려움을 가능한 많이 나열해 주세요."
- 최소 5개, 이상적으로 10개 이상
- 5개 미만이면 카테고리 힌트: 지식 부족, 시간 부족, 돈 부족, 심리적 장벽, 환경적 장벽

#### 질문 3 — 해결책 설계
나열된 장애물 각각에 대해 해결책을 매핑합니다.
"각 장애물에 대해, 당신의 오퍼가 어떻게 해결할 수 있는지 생각해 보세요."
- 장애물-해결책 테이블 형태로 정리

#### 질문 4 — 전달 방법
"이 해결책들을 어떤 형태로 전달하시겠어요?"
- 옵션 제시: 온라인 코스, 1:1 코칭, 그룹 코칭, 템플릿/도구, 커뮤니티, 대행 서비스 등
- 자원(시간, 비용)에 맞는 방법 권장

#### 질문 5 — 가격 책정
"이 오퍼의 가격을 어떻게 설정하고 싶으신가요?"
- 10배 룰 검증: 제공 가치가 가격의 10배인지
- 런칭 가격과 정상 가격 구분 가능

#### 질문 6 — 보장/보너스/긴급성/희소성
"오퍼를 더 강력하게 만들 수 있는 요소를 추가해 봅시다."
- 보장 유형: 무조건 환불, 조건부 환불, 성과 보장, 안티 보장
- 보너스: 2-3개 추가 가치
- 긴급성/희소성: 기간 한정, 수량 한정

#### 질문 7 — 오퍼 네이밍
MAGIC 공식을 적용하여 오퍼 이름 제안 (3개 옵션)

### 현재 수집된 데이터
${JSON.stringify({ offer: sessionData.offer, target_profile: sessionData.target_profile }, null, 2)}

### 현재 서브스텝 상태
${JSON.stringify(substeps, null, 2)}

### 기존 산출물
${existingDocument || "없음"}

### 산출물 템플릿 (02_오퍼_설계.md)
\`\`\`markdown
# 오퍼 설계

> 작성일: [날짜] | 상태: 초안 / 완료

## 1. 꿈의 결과
>

## 2. 장애물 - 해결책 매핑

| # | 장애물 | 해결책 | 전달 방법 |
|---|--------|--------|-----------|
| 1 | | | |

## 3. 가치 방정식 캔버스

| 요소 | 내용 | 점수(1-10) |
|------|------|------------|
| 꿈의 결과 | | |
| 달성 가능성 | | |
| 시간 지연 (낮을수록 좋음) | | |
| 노력/희생 (낮을수록 좋음) | | |

## 4. 오퍼 스택
- 핵심 오퍼:
- 보너스 1:
- 보너스 2:
- 보장:

## 5. 가격 전략
- 정상 가격:
- 런칭 가격:
- 10배 룰 근거:

## 6. 긴급성 & 희소성
- 긴급성:
- 희소성:

## 7. 오퍼 한 줄 요약
>
\`\`\`

### Phase 완료 조건
7개 서브스텝 모두 true이면 phase_complete: true, next_phase: 3`;
}
