import type { SessionData } from "@/lib/types/session";

export function getPhase7Prompt(
  sessionData: SessionData,
  substeps: Record<string, boolean>,
  existingDocument: string | null
): string {
  return `## 현재 Phase: Phase 7 - 실행 계획 & 런칭

### 목적
100의 법칙, More→Better→New, 후크 공식, 런칭 이메일 시퀀스를 사용하여 구체적인 30일 실행 계획을 수립합니다.

### 참조 프레임워크

#### More→Better→New (Alex Hormozi)
- 1-2주: More (현재 방법의 양 늘리기)
- 2-3주: Better (현재 방법의 질 높이기)
- 4주+: New (새로운 채널/방법 추가)

#### 후크 공식
3가지 필수 요소: 구체적 숫자 + 감정 자극 단어 + 호기심 유발
- 결과 증명: "[숫자] [기간]에 [결과]"
- 실수 경고: "[타겟]이 피해야 할 [숫자] 실수"
- 비밀 공개: "[경험]에서 알게 된 충격적인 사실"
- 대비: "[부정적]인 줄 알았는데..."
- 공통점: "[결과]를 달성한 사람들의 공통점 [숫자]가지"

#### 런칭 이메일 시퀀스 (이벤트/런칭 시)
D-14: 발표 | D-10: 가치 제공 | D-7: 사회적 증거 | D-3: 긴급성 | D-1: 리마인더 | 당일: 시작

#### 4주 콘텐츠 플랜
1주: 씨앗 뿌리기 (매일 숏폼, 드림 100 리스트)
2주: 관계 구축 (커뮤니티 30분/일, 롱폼)
3주: 본격 홍보 (등록 페이지 오픈, 모든 채널)
4주: 마지막 푸시 (리마인더, 긴급성/희소성)

### 질문 리스트

#### 질문 1 — 30일 목표
"앞으로 30일 동안 달성하고 싶은 구체적인 목표는 무엇인가요? 숫자로 말씀해 주세요."
- 예: 첫 3명의 고객, 이메일 리스트 200명, 월 100만원 매출

#### 질문 2 — 목표 역산
목표에서 역산하여 일일 액션 계산:
- 최종 목표 → 필요 리드 수 → 필요 트래픽 → 일일 액션

#### 질문 3 — 런칭/이벤트 플랜
"런칭 이벤트(무료 웨비나, 챌린지 등)를 계획하고 있나요?"
- Yes → 런칭 이메일 시퀀스 설계
- No → 스킵하고 질문 4로

#### 질문 4 — 후크 리스트
Phase 1-4 데이터를 활용하여 10개 이상의 후크 생성
"마케팅에 사용할 후크(제목/헤드라인)를 함께 만들어 봅시다."

#### 질문 5 — 30일 실행 계획
4주 단위로 구체적 액션 플랜 자동 생성 후 사용자 확인

#### 질문 6 — 데일리 체크리스트
"매일 체크할 항목을 정리하겠습니다."

#### 질문 7 — KPI 정의
"성공을 측정할 핵심 지표 2-3개를 정하겠습니다."

### 현재 수집된 데이터
${JSON.stringify({
  execution: sessionData.execution,
  lead_strategy: { core_four: sessionData.lead_strategy.core_four },
  offer: { name: sessionData.offer.name },
  resources: sessionData.resources,
}, null, 2)}

### 현재 서브스텝 상태
${JSON.stringify(substeps, null, 2)}

### 기존 산출물
${existingDocument || "없음"}

### 산출물 템플릿 (07_실행계획.md)
\`\`\`markdown
# 실행 계획 & 런칭

> 작성일: [날짜] | 상태: 초안 / 완료

## 1. 30일 목표
>

## 2. 목표 역산
| 항목 | 수치 |
|------|------|
| 최종 목표 | |
| 필요 리드 | |
| 필요 트래픽 | |
| 일일 액션 | |

## 3. 4주 실행 계획

### 1주차: [테마]
| 요일 | 액션 |
|------|------|

### 2주차 ~ 4주차 (동일 형식)

## 4. 후크 리스트
| # | 후크 | 유형 |
|---|------|------|

## 5. 런칭 이메일 시퀀스 (해당 시)
| 시점 | 제목 | 핵심 내용 |
|------|------|-----------|

## 6. 데일리 체크리스트
- [ ]
- [ ]

## 7. KPI
| 지표 | 목표 | 측정 방법 |
|------|------|-----------|
\`\`\`

### Phase 완료 조건
7개 서브스텝 모두 true이면 phase_complete: true, next_phase: null (마지막 Phase)

Phase 7 완료 시, 최종_요약.md도 함께 생성할 것을 document_update에 포함하세요.
최종_요약.md는 Phase 1-7의 핵심 내용을 1페이지로 요약한 문서입니다.`;
}
